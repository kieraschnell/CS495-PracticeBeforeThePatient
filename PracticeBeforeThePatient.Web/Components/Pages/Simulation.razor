@page "/simulation"
@rendermode InteractiveServer
@using System.Text.Json

<PageTitle>Clinical Simulation</PageTitle>

<div class="simShell">

    <div class="simHeader">
        <div class="simBadge">Active Scenario</div>
        <div class="simTitle">Scenario JSON Display</div>
    </div>

    <div class="simGridSingle">
        <div class="card">
            @if (_isLoading)
            {
                <div class="sectionTitle">Loading...</div>
            }
            else if (_errorMessage != null)
            {
                <div class="sectionTitle">Error</div>
                <div style="color: red; white-space: pre-wrap;">@_errorMessage</div>
            }
            else if (_scenario != null)
            {
                <div class="sectionTitle">Scenario JSON</div>
                <pre style="background: #f5f5f5; padding: 20px; border-radius: 8px; overflow-x: auto; white-space: pre-wrap; word-wrap: break-word;">@JsonSerializer.Serialize(_scenario, new JsonSerializerOptions { WriteIndented = true })</pre>
            }
            else
            {
                <div class="sectionTitle">No Data</div>
                <div>No scenario data available.</div>
            }
        </div>
    </div>
</div>